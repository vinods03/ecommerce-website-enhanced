<div class="form-class">
  <form [formGroup]="checkoutFormGroup" (ngSubmit)="onSubmit()">
    <div formGroupName="customer">
      <h3>Customer:</h3>

      <div class="label-and-input">
        <label>First Name</label>
        <input formControlName="firstName" type="text" />
      </div>

      <div
        *ngIf="firstName?.invalid && (firstName?.dirty || firstName?.touched)"
        class="text-danger"
      >
        <div *ngIf="firstName?.errors?.['required']">
          First Name is required
        </div>
        <div *ngIf="firstName?.errors?.['minlength']">
          First Name must be atleast 2 characters long
        </div>
      </div>

      <div class="label-and-input">
        <label>Last Name</label>
        <input formControlName="lastName" type="text" />
      </div>

      <div
        *ngIf="lastName?.invalid && (lastName?.dirty || lastName?.touched)"
        class="text-danger"
      >
        <div *ngIf="lastName?.errors?.['required']">Last Name is required</div>
        <div *ngIf="lastName?.errors?.['minlength']">
          Last Name must be atleast 2 characters long
        </div>
      </div>

      <div class="label-and-input">
        <label>Email</label>
        <input formControlName="email" type="text" />
      </div>

      <div
        *ngIf="email?.invalid && (email?.dirty || email?.touched)"
        class="text-danger"
      >
        <div *ngIf="email?.errors?.['required']">Email is required</div>
        <div *ngIf="email?.errors?.['email']">Valid email is needed</div>
      </div>
    </div>

    <div formGroupName="address">
      <h3>Address:</h3>

      <div class="label-and-input">
        <label>Street</label>
        <input formControlName="street" type="text" />
      </div>

      <div
        *ngIf="street?.invalid && (street?.dirty || street?.touched)"
        class="text-danger"
      >
        <div *ngIf="street?.errors?.['required']">Street name is required</div>
        <div *ngIf="street?.errors?.['minlength']">
          Street name must be atleast 2 characters long
        </div>
      </div>

      <div class="label-and-input">
        <label>City</label>
        <input formControlName="city" type="text" />
      </div>

      <div
        *ngIf="city?.invalid && (city?.dirty || city?.touched)"
        class="text-danger"
      >
        <div *ngIf="city?.errors?.['required']">City is required</div>
        <div *ngIf="city?.errors?.['minlength']">
          City must be atleast 2 characters long
        </div>
      </div>

      <div class="label-and-select">
        <label>State</label>
        <!-- <input formControlName="state" type="text"> -->
        <select formControlName="state">
          <option *ngFor="let state of states">{{ state.name }}</option>
        </select>
      </div>

      <div
        *ngIf="state?.invalid && (state?.dirty || state?.touched)"
        class="text-danger"
      >
        <div *ngIf="state?.errors?.['required']">State is required</div>
      </div>

      <div class="label-and-select">
        <label>Country</label>
        <select formControlName="country" (change)="getStatesByCountry()">
          <option *ngFor="let country of countries" [ngValue]="country">
            {{ country.name }}
          </option>
        </select>
      </div>

      <div
        *ngIf="country?.invalid && (country?.dirty || country?.touched)"
        class="text-danger"
      >
        <div *ngIf="country?.errors?.['required']">Country is required</div>
      </div>

      <div class="label-and-input">
        <label>ZipCode</label>
        <input formControlName="zipCode" type="text" />
      </div>

      <div
        *ngIf="zipCode?.invalid && (zipCode?.dirty || zipCode?.touched)"
        class="text-danger"
      >
        <div *ngIf="zipCode?.errors?.['required']">ZipCode is required</div>
        <div *ngIf="zipCode?.errors?.['minlength']">
          ZipCode must be atleast 2 characters long
        </div>
      </div>
    </div>

    <div formGroupName="creditCard">
      <h3>Credit Card:</h3>

      <div class="label-and-input">
        <label>Card Type</label>
        <input formControlName="creditCardType" type="text" />
      </div>

      <div
        *ngIf="
          creditCardType?.invalid &&
          (creditCardType?.dirty || creditCardType?.touched)
        "
        class="text-danger"
      >
        <div *ngIf="creditCardType?.errors?.['required']">
          Card Type is required
        </div>
      </div>

      <div class="label-and-input">
        <label>Card Number</label>
        <input formControlName="creditCardNumber" type="text" />
      </div>

      <div
        *ngIf="
          creditCardNumber?.invalid &&
          (creditCardNumber?.dirty || creditCardNumber?.touched)
        "
        class="text-danger"
      >
        <div *ngIf="creditCardNumber?.errors?.['required']">
          Card Number is required
        </div>
        <div *ngIf="creditCardNumber?.errors?.['pattern']">
          Card Number must be 16 digits
        </div>
      </div>

      <div class="label-and-input">
        <label>CVV</label>
        <input formControlName="creditCardCVV" type="text" />
      </div>

      <div
        *ngIf="
          creditCardCVV?.invalid &&
          (creditCardCVV?.dirty || creditCardCVV?.touched)
        "
        class="text-danger"
      >
        <div *ngIf="creditCardCVV?.errors?.['required']">
          Card Number is required
        </div>
        <div *ngIf="creditCardCVV?.errors?.['pattern']">
          CVV must be 3 digits
        </div>
      </div>

      <div class="label-and-input">
        <label>Name</label>
        <input formControlName="creditCardName" type="text" />
      </div>
      <div
        *ngIf="
          creditCardName?.invalid &&
          (creditCardName?.dirty || creditCardName?.touched)
        "
        class="text-danger"
      >
        <div *ngIf="creditCardName?.errors?.['required']">Name is required</div>
        <div *ngIf="creditCardName?.errors?.['minlength']">
          Name must be atleast 2 characters long
        </div>
      </div>

      <div class="label-and-input">
        <label>Expiry Year</label>
        <!-- <input formControlName="expiryYear" type="text"> -->
        <select formControlName="expiryYear">
          <option *ngFor="let year of years">{{ year }}</option>
        </select>
      </div>
      <div
        *ngIf="
          expiryYear?.invalid && (expiryYear?.dirty || expiryYear?.touched)
        "
        class="text-danger"
      >
        <div *ngIf="expiryYear?.errors?.['required']">
          Expiry Year is required
        </div>
      </div>

      <div class="label-and-input">
        <label>Expiry Month</label>
        <select>
          <option *ngFor="let month of months">{{ month }}</option>
        </select>
      </div>
      <div
        *ngIf="
          expiryMonth?.invalid && (expiryMonth?.dirty || expiryMonth?.touched)
        "
        class="text-danger"
      >
        <div *ngIf="expiryMonth?.errors?.['required']">
          Expiry Month is required
        </div>
      </div>
    </div>

    <br />
    <button type="submit" [disabled]="!checkoutFormGroup.valid">
      Purchase
    </button>
    <button (click)="goBack()" class="go-back-button">
      Go Back to Shopping
    </button>
  </form>
</div>
